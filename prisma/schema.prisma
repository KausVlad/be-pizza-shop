// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum EnumRole {
  USER
  MANAGER
  ADMIN
}

enum EnumSex {
  MALE
  FEMALE
  OTHER
}

enum EnumPizzaSize {
  SMALL
  STANDARD
  LARGE
  HUGE
}

enum EnumDoughCrust {
  THIN
  THICK_CRUST
  PHILADELPHIA
  HOT_DOG_CRUST
}

enum EnumPizzaIngredientGroup {
  VEGETABLE
  CHEESE
  MEAT
  SAUCE
}

enum EnumPizzaAttributeName {
  CHEESE
  VEGETARIAN
  SPICY
  NEW
}

model User {
  id           Int      @id @default(autoincrement())
  userPhoto    String?  @map("user_photo")
  userName     String   @map("user_name")
  birthDate    DateTime @map("birth_date")
  address      String
  sex          EnumSex
  email        String   @unique
  phone        String   @unique
  passwordHash String   @map("password_hash")
  role         EnumRole @default(USER)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
}

model Pizza {
  id              Int              @id @default(autoincrement())
  pizzaName       String           @unique @map("pizza_name")
  createdAt       DateTime         @default(now()) @map("created_at")
  updatedAt       DateTime         @updatedAt @map("updated_at")
  size            EnumPizzaSize    @default(STANDARD)
  weightStandard  Int              @map("weight_standard")
  priceStandard   Int              @map("price_standard")
  doughCrust      EnumDoughCrust   @default(THICK_CRUST) @map("dough_crust")
  pizzaAttributes PizzaAttribute[]
  ingredients     Ingredient[]
}

model PizzaAttribute {
  id            Int                    @id @default(autoincrement())
  attributeName EnumPizzaAttributeName @unique @default(NEW) @map("attribute_name")
  pizzas        Pizza[]
}

model Ingredient {
  id              Int                      @id @default(autoincrement())
  ingredientName  String                   @unique @map("ingredient_name")
  ingredientGroup EnumPizzaIngredientGroup @map("ingredient_group")
  pizzas          Pizza[]
}
